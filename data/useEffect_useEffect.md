# useEffect

URL: https://ko.react.dev/reference/react/useEffect

API ì°¸ê³ ì„œ
Hook
useEffect
useEffect
ëŠ”
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”
í•˜ëŠ” React Hookì…ë‹ˆë‹¤.
```
useEffect(setup, dependencies?)
```
ë ˆí¼ëŸ°ìŠ¤
useEffect(setup, dependencies?)
ì‚¬ìš©ë°©ë²•
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ê²°
ì»¤ìŠ¤í…€ Hookì„ Effectë¡œ ê°ì‹¸ê¸°
Reactë¡œ ì‘ì„±ë˜ì§€ ì•Šì€ ìœ„ì ¯ ì œì–´í•˜ê¸°
Effectë¥¼ ì´ìš©í•œ ë°ì´í„° í˜ì¹­
ë°˜ì‘í˜•ê°’ ì˜ì¡´ì„± ì§€ì •
Effectì—ì„œ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ state ì—…ë°ì´íŠ¸í•˜ê¸°
ë¶ˆí•„ìš”í•œ ê°ì²´ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
Effectì—ì„œ ìµœì‹  propsì™€ stateë¥¼ ì½ê¸°
ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‹¤ë¥¸ ì»¨í…ì¸ ë¥¼ í‘œì‹œí•˜ê¸°
íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
Effectê°€ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ 2ë²ˆ ë™ì‘í•©ë‹ˆë‹¤.
Effectê°€ ë§¤ ë¦¬ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
Effectê°€ ë¬´í•œ ë°˜ë³µë©ë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ì§€ ì•Šì•˜ìŒì—ë„ ì •ë¦¬ í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
Effectê°€ ì‹œê°ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©°, ì‹¤í–‰ë˜ê¸° ì „ì— ê¹œë¹¡ì„ì´ ë³´ì…ë‹ˆë‹¤.
ë ˆí¼ëŸ°ìŠ¤
useEffect(setup, dependencies?)
ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ
useEffect
ë¥¼ í˜¸ì¶œí•˜ì—¬ Effectë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
import { useState, useEffect } from 'react';import { createConnection } from './chat.js';function ChatRoom({ roomId }) {  const [serverUrl, setServerUrl] = useState('https://localhost:1234');  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => {      connection.disconnect();    };  }, [serverUrl, roomId]);  // ...}
```
ì•„ë˜ì—ì„œ ë” ë§ì€ ì˜ˆì‹œë¥¼ ë³´ì„¸ìš”.
ë§¤ê°œë³€ìˆ˜
setup(ì„¤ì •)
: Effectì˜ ë¡œì§ì´ í¬í•¨ëœ í•¨ìˆ˜ì…ë‹ˆë‹¤. ì„¤ì • í•¨ìˆ˜ëŠ” ì„ íƒì ìœ¼ë¡œ
clean up(ì •ë¦¬)
í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReactëŠ” ì»´í¬ë„ŒíŠ¸ê°€ DOMì— ì¶”ê°€ëœ ì´í›„ì— ì„¤ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì˜ì¡´ì„±ì˜ ë³€í™”ì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ì´ ë˜ì—ˆì„ ê²½ìš°, (ì„¤ì • í•¨ìˆ˜ì— ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì¶”ê°€í–ˆì—ˆë‹¤ë©´) ReactëŠ” ì´ì „ ë Œë”ë§ì— ì‚¬ìš©ëœ ê°’ìœ¼ë¡œ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ í›„ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì„¤ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ DOMì—ì„œ ì œê±°ëœ ê²½ìš°ì—ë„ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
dependencies
ì„ íƒì‚¬í•­
:
ì„¤ì •
í•¨ìˆ˜ì˜ ì½”ë“œ ë‚´ë¶€ì—ì„œ ì°¸ì¡°ë˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ë“¤ì´ í¬í•¨ëœ ë°°ì—´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ë°˜ì‘í˜• ê°’ì—ëŠ” propsì™€ state, ëª¨ë“  ë³€ìˆ˜ ë° ì»´í¬ë„ŒíŠ¸ bodyì— ì§ì ‘ì ìœ¼ë¡œ ì„ ì–¸ëœ í•¨ìˆ˜ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤. ë¦°í„°ê°€
React í™˜ê²½ì— ë§ê²Œ ì„¤ì •ë˜ì–´ ìˆì„ ê²½ìš°
, ë¦°í„°ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ë“¤ì´ ì˜ì¡´ì„±ì— ì œëŒ€ë¡œ ëª…ì‹œë˜ì–´ ìˆëŠ”ì§€ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì˜ì¡´ì„± ë°°ì—´ì€ í•­ìƒ ì¼ì •í•œ ìˆ˜ì˜ í•­ëª©ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ë©°
[dep1, dep2, dep3]
ê³¼ ê°™ì´ ì‘ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ReactëŠ” ê°ê°ì˜ ì˜ì¡´ì„±ë“¤ì„
Object.is
ë¹„êµë²•ì„ í†µí•´ ì´ì „ ê°’ê³¼ ë¹„êµí•©ë‹ˆë‹¤. ì˜ì¡´ì„±ì„ ìƒëµí•  ê²½ìš°, EffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
ì¸ìˆ˜ì— ì˜ì¡´ì„± ë°°ì—´ì„ ì¶”ê°€í–ˆì„ ë•Œ, ë¹ˆ ë°°ì—´ì„ ì¶”ê°€í–ˆì„ ë•Œ, ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ ì°¨ì´ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.
ë°˜í™˜ê°’
useEffect
ëŠ”
undefined
ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
ì£¼ì˜ ì‚¬í•­
useEffect
ëŠ” Hookì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë˜ëŠ” ì»¤ìŠ¤í…€ Hookì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¡œ stateë¥¼ ì´ë™í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°,
Effectë¥¼ ì„ ì–¸í•  í•„ìš”ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Strict Modeë¥¼ ì‚¬ìš©í•  ê²½ìš°, ReactëŠ” ì‹¤ì œ ì²« ë²ˆì§¸ ì„¤ì • í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì´ì „ì—
ê°œë°œ ëª¨ë“œì—ë§Œ í•œì •í•˜ì—¬ í•œ ë²ˆì˜ ì¶”ê°€ì ì¸ ì„¤ì • + ì •ë¦¬ ì‚¬ì´í´ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
ì´ëŠ” ì •ë¦¬ ë¡œì§ì´ ì„¤ì • ë¡œì§ì„ ì™„ë²½íˆ â€œë°˜ì˜â€í•˜ê³  ì„¤ì • ë¡œì§ì´ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê±°ë‚˜ ì·¨ì†Œí•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì´ì— ë”°ë¼ ë¬¸ì œê°€ ìƒê¸¸ ê²½ìš°,
ì •ë¦¬ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì‹­ì‹œì˜¤.
ë§Œì•½ ì˜ì¡´ì„±ì´ ê°ì²´ì´ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì„ ì–¸ëœ í•¨ìˆ˜ì¼ ê²½ìš°ì—ëŠ” Effectê°€ í•„ìš” ì´ìƒìœ¼ë¡œ ì¬ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ë¶ˆí•„ìš”í•œ
ê°ì²´ ì˜ì¡´ì„±
ì´ë‚˜
í•¨ìˆ˜ ì˜ì¡´ì„±
ì„ ì œê±°í•˜ì„¸ìš”. ë˜ëŠ”
state ì—…ë°ì´íŠ¸ë¥¼ ì¶”ì¶œ
í•˜ê±°ë‚˜ Effect ë°–ìœ¼ë¡œ
ë¹„ ë°˜ì‘í˜• ë¡œì§
ì„ ë¹¼ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Effectê°€ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­ ë“±)ì— ì˜í•´ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´, ReactëŠ” ì¼ë°˜ì ìœ¼ë¡œ
Effectë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ë¸Œë¼ìš°ì €ê°€ ì—…ë°ì´íŠ¸ëœ í™”ë©´ì„ ë¨¼ì € ë Œë”ë§í•˜ë„ë¡ í•©ë‹ˆë‹¤.
ë§Œì•½ Effectê°€ ì‹œê°ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  (ì˜ˆ: íˆ´íŒì˜ ìœ„ì¹˜ ì¡°ì •), ì´ì— ë”°ë¼ ì§€ì—°ì´ ëˆˆì— ë„ê²Œ ë‚˜íƒ€ë‚œë‹¤ë©´ (ì˜ˆ: ê¹œë¹¡ì„ í˜„ìƒ),
useEffect
ëŒ€ì‹ 
useLayoutEffect
ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
Effectê°€ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­ ë“±)ìœ¼ë¡œ ì¸í•´ ë°œìƒí•œ ê²½ìš°,
ReactëŠ” í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì–´ ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ê·¸ë¦¬ê¸° ì „ì— Effectë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ê²ƒì´ Effectì˜ ê²°ê³¼ë¥¼ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œì´ ê´€ì°°í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê°œ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ì§€ë§Œ,
alert()
ì™€ ê°™ì´ ì‘ì—…ì„ ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ê·¸ë¦° í›„ë¡œ ë¯¸ë¤„ì•¼ í•˜ëŠ” ê²½ìš°
setTimeout
ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€
reactwg/react-18/128
ì„ ì°¸ì¡°í•˜ì„¸ìš”.
Effectê°€ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­ ë“±)ì— ì˜í•´ ë°œìƒí–ˆë”ë¼ë„,
ReactëŠ” ë•Œë¡œ Effect ë‚´ë¶€ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ì „ì— ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ë„ë¡ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” ëŒ€ê°œ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ì§€ë§Œ, ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ì§€ ì•Šë„ë¡ ë§‰ì•„ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´
useEffect
ëŒ€ì‹ 
useLayoutEffect
ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
EffectëŠ”
client í™˜ê²½ì—ì„œë§Œ ë™ì‘í•©ë‹ˆë‹¤.
ì„œë²„ ë Œë”ë§ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì‚¬ìš©ë°©ë²•
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ê²°
ëª‡ëª‡ ì»´í¬ë„ŒíŠ¸ë“¤ì€ í˜ì´ì§€ì— í‘œì‹œë˜ëŠ” ë™ì•ˆ ë„¤íŠ¸ì›Œí¬ë‚˜ ë¸Œë¼ìš°ì € API, ë˜ëŠ” ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ì˜ ì—°ê²°ì´ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. Reactì— ì œì–´ë˜ì§€ ì•ŠëŠ” ì´ëŸ¬í•œ ì‹œìŠ¤í…œë“¤ì„
ì™¸ë¶€ ì‹œìŠ¤í…œ(external)
ì´ë¼ ë¶€ë¦…ë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ê²°
í•˜ë ¤ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ
useEffect
ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
```
import { useState, useEffect } from 'react';import { createConnection } from './chat.js';function ChatRoom({ roomId }) {  const [serverUrl, setServerUrl] = useState('https://localhost:1234');  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => {      connection.disconnect();    };  }, [serverUrl, roomId]);  // ...}
```
useEffect
ëŠ” 2ê°œì˜ ì¸ìˆ˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—°ê²°í•˜ëŠ”
ì„¤ì • ì½”ë“œ
ê°€ í¬í•¨ëœ
ì„¤ì • í•¨ìˆ˜
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì—°ê²°ì„ í•´ì œí•˜ëŠ”
ì •ë¦¬ ì½”ë“œ
ê°€ í¬í•¨ëœ
ì •ë¦¬ í•¨ìˆ˜
ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìœ„ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ë¡¯ëœ ë°˜ì‘í˜• ê°’ë“¤ì„ í¬í•¨í•˜ëŠ”
ì˜ì¡´ì„± ë°°ì—´
ReactëŠ” ì„¤ì • í•¨ìˆ˜ì™€ ì •ë¦¬ í•¨ìˆ˜ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ í˜¸ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì¶”ê°€ë˜ì—ˆì„ ë•Œ
ì„¤ì • ì½”ë“œ
ê°€ ë™ì‘í•©ë‹ˆë‹¤
(ë§ˆìš´íŠ¸ ì‹œ)
.
ì˜ì¡´ì„±
ì´ ë³€ê²½ëœ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì•„ë˜ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
ë¨¼ì €
ì •ë¦¬ ì½”ë“œ
ê°€ ì˜¤ë˜ëœ propsì™€ stateì™€ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤.
ì´í›„,
ì„¤ì • ì½”ë“œ
ê°€ ìƒˆë¡œìš´ propsì™€ stateì™€ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì œê±°ëœ ì´í›„ì—
ì •ë¦¬ ì½”ë“œ
ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤
(ë§ˆìš´íŠ¸ í•´ì œ ì‹œ)
.
ìœ„ì˜ ì˜ˆì‹œë¥¼ í†µí•´ ìˆœì„œë¥¼ ì„¤ëª…í•´ ë³´ê² ìŠµë‹ˆë‹¤.
ìœ„ì˜
ChatRoom
ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì¶”ê°€ë˜ë©´ ì´ˆê¸°
serverUrl
ê³¼
roomId
ë¥¼ ì´ìš©í•´ ì±„íŒ…ë°©ê³¼ ì—°ê²°ë  ê²ƒì…ë‹ˆë‹¤. ë¦¬ë Œë”ë§ì— ì˜í•´
serverUrl
ë˜ëŠ”
roomId
ê°€ ë³€ê²½ëœë‹¤ë©´ (ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìê°€ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë¥¼ ì´ìš©í•´ ë‹¤ë¥¸ ì±„íŒ…ë°©ì„ ì„ íƒí•  ê²½ìš°)
EffectëŠ” ì´ì „ ì±„íŒ…ë°©ê³¼ì˜ ì—°ê²°ì„ í•´ì œí•˜ê³  ë‹¤ìŒ ì±„íŒ…ë°©ê³¼ ì—°ê²°í•©ë‹ˆë‹¤.
ChatRoom
ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì œê±°ëœë‹¤ë©´ EffectëŠ” ë§ˆì§€ë§‰ ì±„íŒ…ë°©ê³¼ ì´ë¤„ì§„ ì—°ê²°ì„ í•´ì œí•  ê²ƒì…ë‹ˆë‹¤.
ReactëŠ”
ë²„ê·¸ë¥¼ ë°œê²¬í•˜ê¸° ìœ„í•´
ê°œë°œëª¨ë“œì—ì„œ
ì„¤ì •
ì´ ì‹¤í–‰ë˜ê¸° ì „ì—
ì„¤ì •
ê³¼
ì •ë¦¬
ë¥¼ í•œ ë²ˆ ë” ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.
ì´ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ì˜ í•˜ë‚˜ë¡œì¨ Effectì˜ ë¡œì§ì´ ì •í™•í•˜ê²Œ ìˆ˜í–‰ë˜ê³  ìˆëŠ”ì§€ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤. ë§Œì•½ ê°€ì‹œì ì¸ ì´ìŠˆê°€ ë³´ì¸ë‹¤ë©´ ì •ë¦¬ í•¨ìˆ˜ì˜ ë¡œì§ì— ë†“ì¹œ ë¶€ë¶„ì´ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì •ë¦¬ í•¨ìˆ˜ëŠ” ì„¤ì • í•¨ìˆ˜ì˜ ì–´ë– í•œ ë™ì‘ì´ë¼ë„ ì¤‘ì§€í•˜ê±°ë‚˜ ì‹¤í–‰ ì·¨ì†Œë¥¼ í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë©°, ì‚¬ìš©ìëŠ”
ì„¤ì •
í•¨ìˆ˜ê°€ í•œ ë²ˆ í˜¸ì¶œë  ë•Œì™€
ì„¤ì •
â†’
ì •ë¦¬
â†’
ì„¤ì •
ìˆœì„œë¡œ í˜¸ì¶œë  ë•Œì˜ ì°¨ì´ë¥¼ ëŠë‚„ ìˆ˜ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.
ê°ê°ì˜ Effectë¥¼ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ ì‘ì„±
í•˜ê³ 
ì •í™•í•œ ì„¤ì •/ì •ë¦¬ ì‚¬ì´í´ì„ ê³ ë ¤í•˜ì„¸ìš”.
ì»´í¬ë„ŒíŠ¸ì˜ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸, ë§ˆìš´íŠ¸ í•´ì œ ì—¬ë¶€ëŠ” ì¤‘ìš”í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. ì •ë¦¬ ë¡œì§ì´ ì„¤ì • ë¡œì§ê³¼ ì •í™•í•˜ê²Œ â€œë¯¸ëŸ¬ë§â€ë  ë•Œ, EffectëŠ” ì„¤ì •ê³¼ ì •ë¦¬ë¥¼ í•„ìš”í•œ ë§Œí¼ ê²¬ê³ í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
ì¤‘ìš”í•©ë‹ˆë‹¤!
EffectëŠ” (ì±„íŒ… ì‹œìŠ¤í…œê³¼ ê°™ì€) ì™¸ë¶€ ì‹œìŠ¤í…œê³¼
ì»´í¬ë„ŒíŠ¸ê°€ ë™ê¸°í™”ë¥¼ ìœ ì§€
í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œ
ì€ Reactì— ì˜í•´ ì»¨íŠ¸ë¡¤ë˜ì§€ ì•ŠëŠ” ëª¨ë“  ì½”ë“œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:
setInterval()
ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” íƒ€ì´ë¨¸ ë˜ëŠ”
clearInterval()
.
window.addEventListener()
ì„ ì´ìš©í•œ ì´ë²¤íŠ¸ êµ¬ë… ë˜ëŠ”
window.removeEventListener()
.
animation.start()
ì™€ ê°™ì€ ì„œë“œ íŒŒí‹° ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ API ë˜ëŠ”
animation.reset()
.
ë§Œì•½ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ Reactë¥¼ ì—°ê²°í•  í•„ìš”ê°€ ì—†ë‹¤ë©´
Effectë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ê²° ì˜ˆì‹œ
1
.
ì±„íŒ… ì„œë²„ì™€ ì—°ê²°
2
.
ì „ì—­ ë¸Œë¼ìš°ì € ì´ë²¤íŠ¸ ê°ì‹œí•˜ê¸°
3
.
ì• ë‹ˆë©”ì´ì…˜ ë™ì‘ì‹œí‚¤ê¸°
4
.
ëª¨ë‹¬ ëŒ€í™” ìƒì ì œì–´í•˜ê¸°
5
.
ìš”ì†Œì˜ ê°€ì‹œì„± ì¶”ì 
ì˜ˆì‹œ
1
of
5
:
ì±„íŒ… ì„œë²„ì™€ ì—°ê²°
ì´ ì˜ˆì‹œì—ì„œëŠ”
ChatRoom
ì»´í¬ë„ŒíŠ¸ì˜ Effectë¥¼ í†µí•´
chat.js
ë¡œ ì •ì˜ëœ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ê²°ì„ ìœ ì§€í•©ë‹ˆë‹¤. â€œOpen chatâ€ì„ ëˆ„ë¥´ë©´
ChatRoom
ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì´ ìƒŒë“œë°•ìŠ¤ëŠ” ê°œë°œ ëª¨ë“œì—ì„œ ë™ì‘í•˜ë¯€ë¡œ
ì¶”ê°€ì ì¸ ì—°ê²°-ì—°ê²°í•´ì œ ì‚¬ì´í´
ì´ ë™ì‘í•©ë‹ˆë‹¤. ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë‚˜ inputì„ ì´ìš©í•´
roomId
ë˜ëŠ”
serverUrl
ë¥¼ ë³€ê²½í•˜ê³  ì–´ë–»ê²Œ Effectê°€ chatì„ ì¬ì—°ê²°í•˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì„¸ìš”. â€œClose chatâ€ì„ ëˆŒëŸ¬ Effectê°€ ë§ˆì§€ë§‰ì— ì—°ê²°ë˜ì—ˆë˜ chatì„ ì—°ê²° í•´ì œí•˜ëŠ” ê²ƒë„ í™•ì¸í•´ ë³´ì„¸ìš”.
App.js
chat.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
createConnection
}
from
'./chat.js'
;
function
ChatRoom
(
{
roomId
}
)
{
const
[
serverUrl
,
setServerUrl
]
=
useState
(
'https://localhost:1234'
)
;
useEffect
(
(
)
=>
{
const
connection
=
createConnection
(
serverUrl
,
roomId
)
;
connection
.
connect
(
)
;
return
(
)
=>
{
connection
.
disconnect
(
)
;
}
;
}
,
[
roomId
,
serverUrl
]
)
;
return
(
<
>
<
label
>
Server URL:
{
' '
}
<
input
value
=
{
serverUrl
}
onChange
=
{
e
=>
setServerUrl
(
e
.
target
.
value
)
}
/>
</
label
>
<
h1
>
Welcome to the
{
roomId
}
room!
</
h1
>
</
>
)
;
}
export
default
function
App
(
)
{
const
[
roomId
,
setRoomId
]
=
useState
(
'general'
)
;
const
[
show
,
setShow
]
=
useState
(
false
)
;
return
(
<
>
<
label
>
Choose the chat room:
{
' '
}
<
select
value
=
{
roomId
}
onChange
=
{
e
=>
setRoomId
(
e
.
target
.
value
)
}
>
<
option
value
=
"general"
>
general
</
option
>
<
option
value
=
"travel"
>
travel
</
option
>
<
option
value
=
"music"
>
music
</
option
>
</
select
>
</
label
>
<
button
onClick
=
{
(
)
=>
setShow
(
!
show
)
}
>
{
show
?
'Close chat'
:
'Open chat'
}
</
button
>
{
show
&&
<
hr
/>
}
{
show
&&
<
ChatRoom
roomId
=
{
roomId
}
/>
}
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
ë‹¤ìŒ
ì˜ˆì‹œ
ì»¤ìŠ¤í…€ Hookì„ Effectë¡œ ê°ì‹¸ê¸°
EffectëŠ”
â€œíƒˆì¶œêµ¬â€
ì…ë‹ˆë‹¤. â€œReact ë°”ê¹¥ìœ¼ë¡œ ë‚˜ê°€ì•¼ í•  ë•Œâ€ì™€ ìœ ì¦ˆì¼€ì´ìŠ¤ì— í•„ìš”í•œ ë¹ŒíŠ¸ì¸ ì†”ë£¨ì…˜ì´ ì—†ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë§Œì•½ Effectë¥¼ ìì£¼ ì‘ì„±í•´ì•¼ í•œë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì˜ì¡´í•˜ê³  ìˆëŠ” ê³µí†µì ì¸ ë™ì‘ë“¤ì„
ì»¤ìŠ¤í…€ Hook
ìœ¼ë¡œ ì¶”ì¶œí•´ì•¼ í•œë‹¤ëŠ” ì‹ í˜¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆì‹œë¡œ ì•„ë˜ì˜
useChatRoom
ì»¤ìŠ¤í…€ Hookì€ Effectì˜ ë¡œì§ì„ ì¡°ê¸ˆ ë” ì„ ì–¸ì ì¸ APIë¡œ ë³´ì¼ ìˆ˜ ìˆë„ë¡ ìˆ¨ê²¨ì¤ë‹ˆë‹¤.
```
function useChatRoom({ serverUrl, roomId }) {  useEffect(() => {    const options = {      serverUrl: serverUrl,      roomId: roomId    };    const connection = createConnection(options);    connection.connect();    return () => connection.disconnect();  }, [roomId, serverUrl]);}
```
ì´ì œ ì´ ì»¤ìŠ¤í…€ Hookì„ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
function ChatRoom({ roomId }) {  const [serverUrl, setServerUrl] = useState('https://localhost:1234');  useChatRoom({    roomId: roomId,    serverUrl: serverUrl  });  // ...
```
ë˜í•œ React ìƒíƒœê³„ì—ëŠ” ê°ì¢… ëª©ì ì— ë§ëŠ” í›Œë¥­í•œ ì»¤ìŠ¤í…€ Hookë“¤ë„ ë§ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
ì´ ë§í¬ë¥¼ í†µí•´ ì»¤ìŠ¤í…€ Hookì— ëŒ€í•´ ë” ë§ì´ ê³µë¶€í•´ë³´ì„¸ìš”.
ì»¤ìŠ¤í…€ Hookì—ì„œ Effectë¥¼ í™œìš©í•˜ëŠ” ì˜ˆì‹œ
1
.
ì»¤ìŠ¤í…€
useChatRoom
Hook
2
.
ì»¤ìŠ¤í…€
useWindowListener
Hook
3
.
ì»¤ìŠ¤í…€
useIntersectionObserver
Hook
ì˜ˆì‹œ
1
of
3
:
ì»¤ìŠ¤í…€
useChatRoom
Hook
ì´ ì˜ˆì‹œëŠ”
ì´ì „ ì˜ˆì‹œ
ì¤‘ í•˜ë‚˜ì™€ ë™ì¼í•˜ì§€ë§Œ ë¡œì§ì´ ì»¤ìŠ¤í…€ Hookìœ¼ë¡œ ì¶”ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.
App.js
useChatRoom.js
chat.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
}
from
'react'
;
import
{
useChatRoom
}
from
'./useChatRoom.js'
;
function
ChatRoom
(
{
roomId
}
)
{
const
[
serverUrl
,
setServerUrl
]
=
useState
(
'https://localhost:1234'
)
;
useChatRoom
(
{
roomId
:
roomId
,
serverUrl
:
serverUrl
}
)
;
return
(
<
>
<
label
>
Server URL:
{
' '
}
<
input
value
=
{
serverUrl
}
onChange
=
{
e
=>
setServerUrl
(
e
.
target
.
value
)
}
/>
</
label
>
<
h1
>
Welcome to the
{
roomId
}
room!
</
h1
>
</
>
)
;
}
export
default
function
App
(
)
{
const
[
roomId
,
setRoomId
]
=
useState
(
'general'
)
;
const
[
show
,
setShow
]
=
useState
(
false
)
;
return
(
<
>
<
label
>
Choose the chat room:
{
' '
}
<
select
value
=
{
roomId
}
onChange
=
{
e
=>
setRoomId
(
e
.
target
.
value
)
}
>
<
option
value
=
"general"
>
general
</
option
>
<
option
value
=
"travel"
>
travel
</
option
>
<
option
value
=
"music"
>
music
</
option
>
</
select
>
</
label
>
<
button
onClick
=
{
(
)
=>
setShow
(
!
show
)
}
>
{
show
?
'Close chat'
:
'Open chat'
}
</
button
>
{
show
&&
<
hr
/>
}
{
show
&&
<
ChatRoom
roomId
=
{
roomId
}
/>
}
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
ë‹¤ìŒ
ì˜ˆì‹œ
Reactë¡œ ì‘ì„±ë˜ì§€ ì•Šì€ ìœ„ì ¯ ì œì–´í•˜ê¸°
ê°€ë”ì€ ì»´í¬ë„ŒíŠ¸ì˜ prop ë˜ëŠ” stateë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ React ì—†ì´ ì‘ì„±ëœ ì„œë“œ íŒŒí‹° ì§€ë„ ìœ„ì ¯ì´ë‚˜ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ ì´ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ í˜„ì¬ React ì»´í¬ë„ŒíŠ¸ì˜ stateì™€ ì¼ì¹˜í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ Effectë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ EffectëŠ”
map-widget.js
ì— ì •ì˜ëœ
MapWidget
í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
Map
ì»´í¬ë„ŒíŠ¸ì˜
zoomLevel
propì„ ë³€ê²½í•  ë•Œ, EffectëŠ” í•´ë‹¹ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜
setZoom()
ì„ í˜¸ì¶œí•˜ì—¬ ë™ê¸°í™”ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
App.js
Map.js
map-widget.js
Map.js
ì´ˆê¸°í™”
í¬í¬
import
{
useRef
,
useEffect
}
from
'react'
;
import
{
MapWidget
}
from
'./map-widget.js'
;
export
default
function
Map
(
{
zoomLevel
}
)
{
const
containerRef
=
useRef
(
null
)
;
const
mapRef
=
useRef
(
null
)
;
useEffect
(
(
)
=>
{
if
(
mapRef
.
current
===
null
)
{
mapRef
.
current
=
new
MapWidget
(
containerRef
.
current
)
;
}
const
map
=
mapRef
.
current
;
map
.
setZoom
(
zoomLevel
)
;
}
,
[
zoomLevel
]
)
;
return
(
<
div
style
=
{
{
width
:
200
,
height
:
200
}
}
ref
=
{
containerRef
}
/>
)
;
}
ìì„¸íˆ ë³´ê¸°
ì´ ì˜ˆì‹œì—ì„œëŠ” ì •ë¦¬ í•¨ìˆ˜ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ”
MapWidget
í´ë˜ìŠ¤ê°€ í´ë˜ìŠ¤ì— ì „ë‹¬ëœ DOM ë…¸ë“œë§Œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
Map
ì»´í¬ë„ŒíŠ¸ê°€ íŠ¸ë¦¬ì—ì„œ ì œê±°ëœ í›„, ë¸Œë¼ìš°ì €ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì— ì˜í•´ DOM ë…¸ë“œì™€
MapWidget
í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ëª¨ë‘ê°€ ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì— ì˜í•´ ì •ë¦¬ë©ë‹ˆë‹¤.
Effectë¥¼ ì´ìš©í•œ ë°ì´í„° í˜ì¹­
ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ í˜ì¹­í•˜ê¸° ìœ„í•´ Effectë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½
í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´
í”„ë ˆì„ì›Œí¬ì˜ ë°ì´í„° í˜ì¹­ ë©”ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•˜ëŠ” ê²ƒì´ Effectë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤ ë” íš¨ìœ¨ì ì¼ ê²ƒì…ë‹ˆë‹¤.
ë§Œì•½ ì§ì ‘ Effectë¥¼ ì‘ì„±í•˜ì—¬ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ê³  ì‹¶ë‹¤ë©´, ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
import { useState, useEffect } from 'react';import { fetchBio } from './api.js';export default function Page() {  const [person, setPerson] = useState('Alice');  const [bio, setBio] = useState(null);  useEffect(() => {    let ignore = false;    setBio(null);    fetchBio(person).then(result => {      if (!ignore) {        setBio(result);      }    });    return () => {      ignore = true;    };  }, [person]);  // ...
```
ignore
ë³€ìˆ˜ì˜ ì´ˆê¸°ê°’ì´
false
ë¡œ ì„¤ì •ë˜ê³  ì •ë¦¬ í•¨ìˆ˜ ë™ì‘ ì¤‘ì—
true
ë¡œ ì„¤ì •ë˜ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš”. ì´ ë¡œì§ì€
ì½”ë“œê°€ â€œê²½ìŸ ìƒíƒœ(race conditions)â€œì— ë¹ ì§€ì§€ ì•Šë„ë¡ ë³´ì¥í•´ ì¤ë‹ˆë‹¤.
ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë³´ë‚¸ ìˆœì„œì™€ ì‘ë‹µì„ ë°›ëŠ” ìˆœì„œê°€ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.
App.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
fetchBio
}
from
'./api.js'
;
export
default
function
Page
(
)
{
const
[
person
,
setPerson
]
=
useState
(
'Alice'
)
;
const
[
bio
,
setBio
]
=
useState
(
null
)
;
useEffect
(
(
)
=>
{
let
ignore
=
false
;
setBio
(
null
)
;
fetchBio
(
person
)
.
then
(
result
=>
{
if
(
!
ignore
)
{
setBio
(
result
)
;
}
}
)
;
return
(
)
=>
{
ignore
=
true
;
}
}
,
[
person
]
)
;
return
(
<
>
<
select
value
=
{
person
}
onChange
=
{
e
=>
{
setPerson
(
e
.
target
.
value
)
;
}
}
>
<
option
value
=
"Alice"
>
Alice
</
option
>
<
option
value
=
"Bob"
>
Bob
</
option
>
<
option
value
=
"Taylor"
>
Taylor
</
option
>
</
select
>
<
hr
/>
<
p
>
<
i
>
{
bio
??
'Loading...'
}
</
i
>
</
p
>
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
ë˜í•œ
async
/
await
êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•  ìˆ˜ ìˆì§€ë§Œ ì—¬ì „íˆ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.
App.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
fetchBio
}
from
'./api.js'
;
export
default
function
Page
(
)
{
const
[
person
,
setPerson
]
=
useState
(
'Alice'
)
;
const
[
bio
,
setBio
]
=
useState
(
null
)
;
useEffect
(
(
)
=>
{
async
function
startFetching
(
)
{
setBio
(
null
)
;
const
result
=
await
fetchBio
(
person
)
;
if
(
!
ignore
)
{
setBio
(
result
)
;
}
}
let
ignore
=
false
;
startFetching
(
)
;
return
(
)
=>
{
ignore
=
true
;
}
}
,
[
person
]
)
;
return
(
<
>
<
select
value
=
{
person
}
onChange
=
{
e
=>
{
setPerson
(
e
.
target
.
value
)
;
}
}
>
<
option
value
=
"Alice"
>
Alice
</
option
>
<
option
value
=
"Bob"
>
Bob
</
option
>
<
option
value
=
"Taylor"
>
Taylor
</
option
>
</
select
>
<
hr
/>
<
p
>
<
i
>
{
bio
??
'Loading...'
}
</
i
>
</
p
>
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
Effectì—ì„œ ì§ì ‘ ë°ì´í„° í˜ì¹­ ë¡œì§ì„ ì‘ì„±í•˜ë©´ ë‚˜ì¤‘ì— ìºì‹± ê¸°ëŠ¥ì´ë‚˜ ì„œë²„ ë Œë”ë§ê³¼ ê°™ì€ ìµœì í™”ë¥¼ ì¶”ê°€í•˜ê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.
ìì²´ ì œì‘ëœ ì»¤ìŠ¤í…€ Hookì´ë‚˜ ì»¤ë®¤ë‹ˆí‹°ì— ì˜í•´ ìœ ì§€ë³´ìˆ˜ë˜ëŠ” Hookì„ ì‚¬ìš©í•˜ëŠ” í¸ì´ ë” ê°„ë‹¨í•©ë‹ˆë‹¤.
ìì„¸íˆ ì‚´í´ë³´ê¸°
Effectì—ì„œ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ëŠ” ì¢‹ì€ ëŒ€ì•ˆì€ ë¬´ì—‡ì¸ê°€ìš”?
ìì„¸íˆ ë³´ê¸°
Effect ë‚´ë¶€ì—ì„œ
fetch
í˜¸ì¶œì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì•±ì—ì„œ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ëŠ”
ê°€ì¥ ì¸ê¸° ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
í•˜ì§€ë§Œ ì´ê²ƒì€ ë§¤ìš° ìˆ˜ë™ì ì¸ ì ‘ê·¼ ë°©ì‹ì´ë©° í° ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.
EffectëŠ” ì„œë²„ì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì´ëŠ” ì´ˆê¸° ì„œë²„ ë Œë”ë§ ëœ HTMLì´ ë°ì´í„°ê°€ ì—†ëŠ” stateë§Œì„ í¬í•¨í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì»´í“¨í„°ëŠ” ëª¨ë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ê³  ì•±ì„ ë Œë”ë§í•œ ë‹¤ìŒ ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ì´ëŠ” íš¨ìœ¨ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Effect ë‚´ë¶€ì—ì„œ ì§ì ‘ í˜ì¹­ì„ í•˜ëŠ” ê²ƒì€ ë„¤íŠ¸ì›Œí¬ í­í¬(network waterfalls)ê°€ ìƒì„±ë˜ê¸° ì‰½ê²Œ í•©ë‹ˆë‹¤.
ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í›„ ì¼ë¶€ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ê³  ë‚˜ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë©ë‹ˆë‹¤. ì´í›„ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ìì‹ ì˜ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ì˜ ì†ë„ê°€ ë¹ ë¥´ì§€ ì•Šë‹¤ë©´ ì´ ë°©ë²•ì€ ëª¨ë“  ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ í˜ì¹­í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤.
Effect ë‚´ë¶€ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ìºì‹±í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ê³  ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ì—ˆì„ ë•Œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
ì‚¬ìš©í•˜ê¸° ë§¤ìš° ë¶ˆí¸í•œ ë°©ë²•ì…ë‹ˆë‹¤.
ê²½ìŸ ì¡°ê±´
ê³¼ ê°™ì€ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šë„ë¡ fetch í˜¸ì¶œì„ ì‘ì„±í•  ë•Œ ìƒë‹¹í•œ ì–‘ì˜ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.
ì´ëŸ¬í•œ ë‹¨ì ì€ Reactë§Œ í•´ë‹¹ë˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ í˜ì¹­í•  ë•Œë„ í•´ë‹¹ë©ë‹ˆë‹¤. ë¼ìš°íŒ…ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„° í˜ì¹­ì€ ì„¸ë¶€ì ì¸ ì‚¬í•­ì´ ë§ìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì ‘ê·¼ ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
í”„ë ˆì„ì›Œí¬
ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, í•´ë‹¹ í”„ë ˆì„ì›Œí¬ì— ë‚´ì¥ëœ ë°ì´í„° í˜ì¹­ ë©”ì»¤ë‹ˆì¦˜ì„ í™œìš©í•˜ì„¸ìš”.
í˜„ëŒ€ React í”„ë ˆì„ì›Œí¬ëŠ” ë§¤ìš° íš¨ìœ¨ì ì´ë©° ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë¬¸ì œì ì´ ì—†ëŠ” í†µí•©ëœ ë°ì´í„° í˜ì¹­ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìºì‹œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì§ì ‘ ê°œë°œì„ ê³ ë ¤í•´ ë³´ì„¸ìš”.
ì¸ê¸° ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ìœ¼ë¡œëŠ”
React Query
,
useSWR
, ê·¸ë¦¬ê³ 
React Router 6.4+.
ê°€ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì§ì ‘ ì†”ë£¨ì…˜ì„ ê°œë°œí• ìˆ˜ë„ ìˆìœ¼ë©° ì´ ê²½ìš°ì—ëŠ” ì´í™íŠ¸ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ì„œë„ ë°ì´í„° ì‚¬ì „ë¡œë“œ ë˜ëŠ” ë°ì´í„° ìš”êµ¬ì‚¬í•­ì„ ë¼ìš°íŠ¸ë¡œ í˜¸ì´ìŠ¤íŒ…í•˜ëŠ” ë°©ë²•ì„ í†µí•´ ì¤‘ë³µ ìš”ì²­ ë°©ì§€, ì‘ë‹µ ìºì‹± ë° ë„¤íŠ¸ì›Œí¬ í­í¬ íš¨ê³¼ ë°©ì§€ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë§Œì•½ ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì´ ì í•©í•˜ì§€ ì•Šë‹¤ë©´ Effect ë‚´ë¶€ì—ì„œ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ëŠ” ê²ƒì„ ê³„ì† ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë°˜ì‘í˜•ê°’ ì˜ì¡´ì„± ì§€ì •
Effectì˜ ì˜ì¡´ì„±ì„ â€œì„ íƒâ€í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.
Effect ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ 
ë°˜ì‘í˜• ê°’
ì€ ì˜ì¡´ì„±ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. Effectì˜ ì˜ì¡´ì„± ë°°ì—´ì€ ì½”ë“œì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.
```
function ChatRoom({ roomId }) { // ì´ê²ƒì€ ë°˜ì‘í˜• ê°’ì…ë‹ˆë‹¤  const [serverUrl, setServerUrl] = useState('https://localhost:1234'); // ì´ê²ƒë„ ë°˜ì‘í˜• ê°’ì…ë‹ˆë‹¤  useEffect(() => {    const connection = createConnection(serverUrl, roomId); // ì´ EffectëŠ” ì´ ë°˜ì‘í˜• ê°’ë“¤ì„ ì½ìŠµë‹ˆë‹¤    connection.connect();    return () => connection.disconnect();  }, [serverUrl, roomId]); // âœ… ê·¸ë˜ì„œ ì´ ê°’ë“¤ì„ Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤  // ...}
```
serverUrl
ë˜ëŠ”
roomId
ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ EffectëŠ” ìƒˆë¡œìš´ ê°’ì„ ì´ìš©í•´ ì±„íŒ…ì„ ë‹¤ì‹œ ì—°ê²°í•  ê²ƒì…ë‹ˆë‹¤.
ë°˜ì‘í˜• ê°’
ì—ëŠ” propsì™€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤.
roomId
ì™€
serverUrl
ì€ ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì´ë“¤ì„ ì˜ì¡´ì„±ì—ì„œ ì œê±°í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤. ì´ë“¤ì„ ëˆ„ë½í–ˆì„ ë•Œ
ë¦°í„°ê°€ React í™˜ê²½ì— ë§ê²Œ ì„¤ì •ë˜ì–´ ìˆì—ˆë‹¤ë©´
ë¦°í„°ëŠ” ì´ê²ƒì„ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ì‹¤ìˆ˜ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
```
function ChatRoom({ roomId }) {  const [serverUrl, setServerUrl] = useState('https://localhost:1234');  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => connection.disconnect();  }, []); // ğŸ”´ React Hook useEffect has missing dependencies: 'roomId' and 'serverUrl'  // ...}
```
ì˜ì¡´ì„±ì„ ì œê±°í•˜ë ¤ë©´
ê·¸ê²ƒì´ ì˜ì¡´ì„±ì´ ë˜ì§€ ì•Šì•„ì•¼ í•¨ì„ ë¦°í„°ì— ì¦ëª…í•´ì•¼ í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´,
serverUrl
ì„ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ì´ë™í•˜ì—¬ ê·¸ê²ƒì´ ë°˜ì‘ì ì´ì§€ ì•Šê³  ë¦¬ë Œë”ë§ë  ë•Œ ë³€ê²½ë˜ì§€ ì•Šì„ ê²ƒì„ì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
const serverUrl = 'https://localhost:1234'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹˜function ChatRoom({ roomId }) {  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => connection.disconnect();  }, [roomId]); // âœ… ëª¨ë“  ì˜ì¡´ì„±ì´ ì„ ì–¸ë¨  // ...}
```
ì´ì œ
serverUrl
ì€ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹ˆë©° (ë¦¬ë Œë”ë§ë  ë•Œ ë³€ê²½ë˜ì§€ ì•Šì„ ê²ƒì´ë¯€ë¡œ), ì˜ì¡´ì„±ì— ì¶”ê°€í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
Effectì˜ ì½”ë“œê°€ ì–´ë–¤ ë°˜ì‘í˜• ê°’ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ê·¸ ì˜ì¡´ì„± ëª©ë¡ì€ ë¹„ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤. (
[]
)
```
const serverUrl = 'https://localhost:1234'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹˜const roomId = 'music'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹˜function ChatRoom() {  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => connection.disconnect();  }, []); // âœ… ëª¨ë“  ì˜ì¡´ì„±ì´ ì„ ì–¸ë¨  // ...}
```
ì˜ì¡´ì„±ì´ ë¹„ì–´ìˆëŠ” Effect
ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ propsë‚˜ stateê°€ ë³€ê²½ë˜ë„ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì£¼ì˜í•˜ì„¸ìš”!
ê¸°ì¡´ì˜ ì½”ë“œ ë² ì´ìŠ¤ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë¦°í„°ë¥¼ ì–µì œí•˜ê³  ìˆëŠ” ì¼ë¶€ Effectê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
useEffect(() => {  // ...  // ğŸ”´ Avoid suppressing the linter like this:  // eslint-ignore-next-line react-hooks/exhaustive-deps}, []);
```
ì˜ì¡´ì„±ì´ ì½”ë“œì™€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ë•Œ ë²„ê·¸ê°€ ë„ì…ë  ìœ„í—˜ì´ í½ë‹ˆë‹¤.
ë¦°í„°ë¥¼ ì–µì œí•¨ìœ¼ë¡œì¨ Effectê°€ ì˜ì¡´í•˜ëŠ” ê°’ì— ëŒ€í•´ Reactê°€ â€˜ê±°ì§“ë§â€™ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ë¦°í„°ë¥¼ ì†ì´ëŠ” ëŒ€ì‹ 
ì´ëŸ¬í•œ ê°’ë“¤ì´ ë¶ˆí•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•˜ì„¸ìš”.
ë°˜ì‘í˜• ê°’ì„ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ì˜ˆì‹œ
1
.
ì˜ì¡´ì„± ë°°ì—´ ì „ë‹¬
2
.
ë¹ˆ ì˜ì¡´ì„± ë°°ì—´ ì „ë‹¬
3
.
ì˜ì¡´ì„± ë°°ì—´ì„ ì „ë‹¬í•˜ì§€ ì•Šì•˜ì„ ë•Œ
ì˜ˆì‹œ
1
of
3
:
ì˜ì¡´ì„± ë°°ì—´ ì „ë‹¬
ì˜ì¡´ì„±ì„ ëª…ì‹œí•˜ë©´ EffectëŠ”
ì´ˆê¸° ë Œë”ë§ í›„
ê·¸ë¦¬ê³ 
ì˜ì¡´ì„± ê°’ ë³€ê²½ê³¼ í•¨ê»˜ ë¦¬ë Œë”ë§ì´ ëœ í›„ ë™ì‘í•©ë‹ˆë‹¤.
```
useEffect(() => {  // ...}, [a, b]); // aë‚˜ bê°€ ë‹¤ë¥´ë©´ ë‹¤ì‹œ ì‹¤í–‰ë¨
```
ì•„ë˜ ì˜ˆì‹œì—ì„œëŠ”
serverUrl
ì™€
roomId
ì€
ë°˜ì‘í˜• ê°’
ì´ë¯€ë¡œ ë‘˜ ë‹¤ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ë“œë¡­ë‹¤ìš´ì—ì„œ ë‹¤ë¥¸ ë°©ì„ ì„ íƒí•˜ê±°ë‚˜ ì„œë²„ URL ì…ë ¥ì„ í¸ì§‘í•˜ë©´ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜
message
ëŠ” Effectì—ì„œ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ(ì˜ì¡´ì„±ì´ ì•„ë‹ˆë¯€ë¡œ), ë©”ì„¸ì§€ë¥¼ í¸ì§‘í•´ë„ ëŒ€í™”ê°€ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
App.js
chat.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
createConnection
}
from
'./chat.js'
;
function
ChatRoom
(
{
roomId
}
)
{
const
[
serverUrl
,
setServerUrl
]
=
useState
(
'https://localhost:1234'
)
;
const
[
message
,
setMessage
]
=
useState
(
''
)
;
useEffect
(
(
)
=>
{
const
connection
=
createConnection
(
serverUrl
,
roomId
)
;
connection
.
connect
(
)
;
return
(
)
=>
{
connection
.
disconnect
(
)
;
}
;
}
,
[
serverUrl
,
roomId
]
)
;
return
(
<
>
<
label
>
Server URL:
{
' '
}
<
input
value
=
{
serverUrl
}
onChange
=
{
e
=>
setServerUrl
(
e
.
target
.
value
)
}
/>
</
label
>
<
h1
>
Welcome to the
{
roomId
}
room!
</
h1
>
<
label
>
Your message:
{
' '
}
<
input
value
=
{
message
}
onChange
=
{
e
=>
setMessage
(
e
.
target
.
value
)
}
/>
</
label
>
</
>
)
;
}
export
default
function
App
(
)
{
const
[
show
,
setShow
]
=
useState
(
false
)
;
const
[
roomId
,
setRoomId
]
=
useState
(
'general'
)
;
return
(
<
>
<
label
>
Choose the chat room:
{
' '
}
<
select
value
=
{
roomId
}
onChange
=
{
e
=>
setRoomId
(
e
.
target
.
value
)
}
>
<
option
value
=
"general"
>
general
</
option
>
<
option
value
=
"travel"
>
travel
</
option
>
<
option
value
=
"music"
>
music
</
option
>
</
select
>
<
button
onClick
=
{
(
)
=>
setShow
(
!
show
)
}
>
{
show
?
'Close chat'
:
'Open chat'
}
</
button
>
</
label
>
{
show
&&
<
hr
/>
}
{
show
&&
<
ChatRoom
roomId
=
{
roomId
}
/>
}
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
ë‹¤ìŒ
ì˜ˆì‹œ
Effectì—ì„œ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ state ì—…ë°ì´íŠ¸í•˜ê¸°
Effectì—ì„œ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
function Counter() {  const [count, setCount] = useState(0);  useEffect(() => {    const intervalId = setInterval(() => {      setCount(count + 1); // ì´ˆë§ˆë‹¤ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ê³  ì‹¶ìŠµë‹ˆë‹¤...    }, 1000)    return () => clearInterval(intervalId);  }, [count]); // ğŸš© ... í•˜ì§€ë§Œ 'count'ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ëª…ì‹œí•˜ë©´ í•­ìƒ ì¸í„°ë²Œì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.  // ...}
```
count
ê°€ ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ë°˜ë“œì‹œ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜
count
ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì€ Effectê°€ ì •ë¦¬ëœ í›„ ë‹¤ì‹œ ì„¤ì •ë˜ëŠ” ê²ƒì„ ì•¼ê¸°í•˜ë¯€ë¡œ
count
ëŠ” ê³„ì† ì¦ê°€í•  ê²ƒì…ë‹ˆë‹¤. ì´ìƒì ì´ì§€ ì•Šì€ ë°©ì‹ì…ë‹ˆë‹¤.
ì´ëŸ¬í•œ í˜„ìƒì„ ë°©ì§€í•˜ë ¤ë©´
c => c + 1
state ë³€ê²½í•¨ìˆ˜
ë¥¼
setCount
ì— ì¶”ê°€í•˜ì„¸ìš”,
App.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
export
default
function
Counter
(
)
{
const
[
count
,
setCount
]
=
useState
(
0
)
;
useEffect
(
(
)
=>
{
const
intervalId
=
setInterval
(
(
)
=>
{
setCount
(
c
=>
c
+
1
)
;
// âœ… State ì—…ë°ì´í„°ë¥¼ ì „ë‹¬
}
,
1000
)
;
return
(
)
=>
clearInterval
(
intervalId
)
;
}
,
[
]
)
;
// âœ… ì´ì œ countëŠ” ì˜ì¡´ì„±ì´ ì•„ë‹™ë‹ˆë‹¤
return
<
h1
>
{
count
}
</
h1
>
;
}
c => c + 1
ì„
count + 1
ëŒ€ì‹  ì „ë‹¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ,
EffectëŠ” ë” ì´ìƒ
count
ì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì´ ìˆ˜ì •ìœ¼ë¡œ ì¸í•´
count
ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ Effectê°€ ì •ë¦¬ ë° ì„¤ì •ì„ ë‹¤ì‹œ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ê²Œ ë©ë‹ˆë‹¤.
ë¶ˆí•„ìš”í•œ ê°ì²´ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
Effectê°€ ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ ê°ì²´ë‚˜ í•¨ìˆ˜ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°, ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì´ EffectëŠ” ë§¤ ë Œë”ë§ í›„ì— ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤. ì´ëŠ”
ë Œë”ë§ë§ˆë‹¤
options
ê°ì²´ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
```
const serverUrl = 'https://localhost:1234';function ChatRoom({ roomId }) {  const [message, setMessage] = useState('');  const options = { // ğŸš© ì´ ê°ì²´ëŠ” ì¬ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤    serverUrl: serverUrl,    roomId: roomId  };  useEffect(() => {    const connection = createConnection(options); // ê°ì²´ê°€ Effect ì•ˆì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤    connection.connect();    return () => connection.disconnect();  }, [options]); // ğŸš© ê²°ê³¼ì ìœ¼ë¡œ, ì˜ì¡´ì„±ì´ ì¬ ë Œë”ë§ ë•Œë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤  // ...
```
ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ ê°ì²´ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í”¼í•˜ì„¸ìš”. ëŒ€ì‹  ê°ì²´ë¥¼ Effect ë‚´ì—ì„œ ìƒì„±í•˜ì„¸ìš”.
App.js
chat.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
createConnection
}
from
'./chat.js'
;
const
serverUrl
=
'https://localhost:1234'
;
function
ChatRoom
(
{
roomId
}
)
{
const
[
message
,
setMessage
]
=
useState
(
''
)
;
useEffect
(
(
)
=>
{
const
options
=
{
serverUrl
:
serverUrl
,
roomId
:
roomId
}
;
const
connection
=
createConnection
(
options
)
;
connection
.
connect
(
)
;
return
(
)
=>
connection
.
disconnect
(
)
;
}
,
[
roomId
]
)
;
return
(
<
>
<
h1
>
Welcome to the
{
roomId
}
room!
</
h1
>
<
input
value
=
{
message
}
onChange
=
{
e
=>
setMessage
(
e
.
target
.
value
)
}
/>
</
>
)
;
}
export
default
function
App
(
)
{
const
[
roomId
,
setRoomId
]
=
useState
(
'general'
)
;
return
(
<
>
<
label
>
Choose the chat room:
{
' '
}
<
select
value
=
{
roomId
}
onChange
=
{
e
=>
setRoomId
(
e
.
target
.
value
)
}
>
<
option
value
=
"general"
>
general
</
option
>
<
option
value
=
"travel"
>
travel
</
option
>
<
option
value
=
"music"
>
music
</
option
>
</
select
>
</
label
>
<
hr
/>
<
ChatRoom
roomId
=
{
roomId
}
/>
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
ì´ì œ
options
ê°ì²´ë¥¼ Effect ë‚´ì—ì„œ ìƒì„±í•˜ë©´, Effect ìì²´ëŠ” roomId ë¬¸ìì—´ì—ë§Œ ì˜ì¡´í•©ë‹ˆë‹¤.
ì´ ìˆ˜ì •ìœ¼ë¡œ ì…ë ¥ë€ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë”ë¼ë„ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°ì²´ì™€ëŠ” ë‹¬ë¦¬
roomId
ì™€ ê°™ì€ ë¬¸ìì—´ì€ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì§€ ì•ŠëŠ” í•œ ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì˜ì¡´ì„± ì œê±°ì— ê´€í•œ ìì„¸í•œ ì• ìš©ì€ ì—¬ê¸°ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
Effectê°€ ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ ê°ì²´ë‚˜ í•¨ìˆ˜ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°, ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì´ EffectëŠ” ë§¤ ë Œë”ë§ í›„ì— ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤. ì´ëŠ”
ë Œë”ë§ë§ˆë‹¤
createOptions
í•¨ìˆ˜ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
```
function ChatRoom({ roomId }) {  const [message, setMessage] = useState('');  function createOptions() { // ğŸš© ì´ í•¨ìˆ˜ëŠ” ì¬ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë©ë‹ˆë‹¤    return {      serverUrl: serverUrl,      roomId: roomId    };  }  useEffect(() => {    const options = createOptions(); // í•¨ìˆ˜ê°€ Effect ì•ˆì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤    const connection = createConnection();    connection.connect();    return () => connection.disconnect();  }, [createOptions]); // ğŸš© ê²°ê³¼ì ìœ¼ë¡œ, ì˜ì¡´ì„±ì´ ì¬ ë Œë”ë§ ë•Œë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤  // ...
```
ë¦¬ë Œë”ë§ë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ì²˜ìŒë¶€í„° ìƒì„±í•˜ëŠ” ê²ƒ ê·¸ ìì²´ë¡œëŠ” ë¬¸ì œê°€ ë˜ì§€ ì•Šê³ , ì´ë¥¼ ìµœì í™”í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ê²ƒì„ Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Effectê°€ ë¦¬ë Œë”ë§ í›„ë§ˆë‹¤ ë‹¤ì‹œ ì‹¤í–‰ë˜ê²Œ í•©ë‹ˆë‹¤.
ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í”¼í•˜ì„¸ìš”. ëŒ€ì‹  Effect ë‚´ì—ì„œ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ì„¸ìš”.
App.js
chat.js
App.js
ì´ˆê¸°í™”
í¬í¬
import
{
useState
,
useEffect
}
from
'react'
;
import
{
createConnection
}
from
'./chat.js'
;
const
serverUrl
=
'https://localhost:1234'
;
function
ChatRoom
(
{
roomId
}
)
{
const
[
message
,
setMessage
]
=
useState
(
''
)
;
useEffect
(
(
)
=>
{
function
createOptions
(
)
{
return
{
serverUrl
:
serverUrl
,
roomId
:
roomId
}
;
}
const
options
=
createOptions
(
)
;
const
connection
=
createConnection
(
options
)
;
connection
.
connect
(
)
;
return
(
)
=>
connection
.
disconnect
(
)
;
}
,
[
roomId
]
)
;
return
(
<
>
<
h1
>
Welcome to the
{
roomId
}
room!
</
h1
>
<
input
value
=
{
message
}
onChange
=
{
e
=>
setMessage
(
e
.
target
.
value
)
}
/>
</
>
)
;
}
export
default
function
App
(
)
{
const
[
roomId
,
setRoomId
]
=
useState
(
'general'
)
;
return
(
<
>
<
label
>
Choose the chat room:
{
' '
}
<
select
value
=
{
roomId
}
onChange
=
{
e
=>
setRoomId
(
e
.
target
.
value
)
}
>
<
option
value
=
"general"
>
general
</
option
>
<
option
value
=
"travel"
>
travel
</
option
>
<
option
value
=
"music"
>
music
</
option
>
</
select
>
</
label
>
<
hr
/>
<
ChatRoom
roomId
=
{
roomId
}
/>
</
>
)
;
}
ìì„¸íˆ ë³´ê¸°
createOptions
í•¨ìˆ˜ê°€ Effect ë‚´ë¶€ì— ì„ ì–¸ë˜ì—ˆìœ¼ë¯€ë¡œ, Effect ìì²´ëŠ”
roomId
ë¬¸ìì—´ì—ë§Œ ì˜ì¡´í•©ë‹ˆë‹¤. ì´ ìˆ˜ì •ì„ í†µí•´ ì…ë ¥ë€ì— ì…ë ¥í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
roomId
ì™€ ê°™ì€ ë¬¸ìì—´ì€ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì§€ ì•ŠëŠ” í•œ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì˜ì¡´ì„± ì œê±°ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì—¬ê¸°ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
Effectì—ì„œ ìµœì‹  propsì™€ stateë¥¼ ì½ê¸°
ê°œë°œì¤‘ì´ì—ìš”
ì´ ì„¹ì…˜ì€ ì•ˆì • ë²„ì „ì˜ Reactì—
ë°˜ì˜ë˜ì§€ ì•Šì€ ì‹¤í—˜ì  API
ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.
ê¸°ë³¸ì ìœ¼ë¡œ Effectì—ì„œ ë°˜ì‘í˜• ê°’ì„ ì½ì„ ë•ŒëŠ” í•´ë‹¹ ê°’ì„ ì˜ì¡´ì„±ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ Effectê°€ í•´ë‹¹ ê°’ì˜ ëª¨ë“  ë³€ê²½ì— â€˜ë°˜ì‘â€™í•˜ê²Œ ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ì„±ì—ì„œ ì›í•˜ëŠ” ë™ì‘ì…ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” Effectì—ì„œ ìµœì‹  propsì™€ stateë¥¼ â€˜ë°˜ì‘â€™í•˜ì§€ ì•Šê³  ì½ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ì§€ ë°©ë¬¸ë§ˆë‹¤ ì‡¼í•‘ ì¹´íŠ¸ì— ë‹´ê¸´ í•­ëª© ìˆ˜ë¥¼ ê¸°ë¡í•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.
```
function Page({ url, shoppingCart }) {  useEffect(() => {    logVisit(url, shoppingCart.length);  }, [url, shoppingCart]); // âœ… ëª¨ë“  ì˜ì¡´ì„±ì´ ì„ ì–¸ë¨  // ...}
```
url
ë³€ê²½ë§ˆë‹¤ ìƒˆë¡œìš´ í˜ì´ì§€ ë°©ë¬¸ì„ ê¸°ë¡í•˜ê³  ì‹¶ì§€ë§Œ
shoppingCart
ë§Œ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ëŠ” ê¸°ë¡í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?
shoppingCart
ë¥¼ ì˜ì¡´ì„±ì—ì„œ ì œì™¸í•˜ë©´
ë°˜ì‘ì„± ê·œì¹™
ì„ ì–´ê¸°ê²Œ ë©ë‹ˆë‹¤. Effect ë‚´ì—ì„œ í˜¸ì¶œë˜ëŠ” ì½”ë“œì´ì§€ë§Œ ë³€ê²½ì— ë°˜ì‘í•˜ì§€ ì•Šê¸°ë¥¼ ì›í•œë‹¤ë©´
useEffectEvent
Hookì„ ì‚¬ìš©í•˜ì—¬
Effect Event
ë¥¼ ì„ ì–¸í•˜ê³ 
shoppingCart
ë¥¼ ì½ëŠ” ì½”ë“œë¥¼ ê·¸ ì•ˆì— ì´ë™ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
function Page({ url, shoppingCart }) {  const onVisit = useEffectEvent(visitedUrl => {    logVisit(visitedUrl, shoppingCart.length)  });  useEffect(() => {    onVisit(url);  }, [url]); // âœ… ëª¨ë“  ì˜ì¡´ì„±ì´ ì„ ì–¸ë¨  // ...}
```
Effect ì´ë²¤íŠ¸ëŠ” ë°˜ì‘ì ì´ì§€ ì•Šìœ¼ë©° Effectì˜ ì˜ì¡´ì„±ì—ì„œ ë°°ì œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
Effect ì´ë²¤íŠ¸ì—ëŠ” ë¹„ ë°˜ì‘í˜• ì½”ë“œ(Effect ì´ë²¤íŠ¸ ë¡œì§ì€ ìµœì‹  propsì™€ stateë¥¼ ì½ì„ ìˆ˜ ìˆìŒ)ë¥¼ ë°°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
onVisit
ë‚´ì˜
shoppingCart
ë¥¼ ì½ìŒìœ¼ë¡œì¨
shoppingCart
ì˜ ë³€ê²½ìœ¼ë¡œ ì¸í•œ Effectì˜ ì¬ì‹¤í–‰ì„ ë°©ì§€í•©ë‹ˆë‹¤.
Effect ì´ë²¤íŠ¸ê°€ ì–´ë–»ê²Œ ë°˜ì‘í˜• ë° ë¹„ ë°˜ì‘í˜• ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ”ì§€ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì—¬ê¸°ë¥¼ ì½ì–´ë³´ì„¸ìš”.
ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‹¤ë¥¸ ì»¨í…ì¸ ë¥¼ í‘œì‹œí•˜ê¸°
ì•±ì´ ì„œë²„ ë Œë”ë§ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° (
ì§ì ‘
ë˜ëŠ”
í”„ë ˆì„ì›Œí¬
ë¥¼ í†µí•´) ì»´í¬ë„ŒíŠ¸ëŠ” ë‘ ê°€ì§€ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ë Œë”ë§ë©ë‹ˆë‹¤. ì„œë²„ì—ì„œëŠ” ì´ˆê¸° HTMLì„ ìƒì„±í•˜ê¸° ìœ„í•´ ë Œë”ë§ë˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” Reactê°€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í•´ë‹¹ HTMLì— ì—°ê²°í•˜ê¸° ìœ„í•´ ë‹¤ì‹œ ë Œë”ë§ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ê²ƒì´
hydration
ì´ ì‘ë™í•˜ë ¤ë©´ ì´ˆê¸° ë Œë”ë§ ì¶œë ¥ì´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•´ì•¼ í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤.
ë“œë¬¼ê²Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‹¤ë¥¸ ë‚´ìš©ì„ í‘œì‹œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•±ì´
localStorage
ì—ì„œ ì¼ë¶€ ë°ì´í„°ë¥¼ ì½ëŠ” ê²½ìš°, ì´ë¥¼ ì„œë²„ì—ì„œ êµ¬í˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì´ê²ƒì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
```
function MyComponent() {  const [didMount, setDidMount] = useState(false);  useEffect(() => {    setDidMount(true);  }, []);  if (didMount) {    // ... í´ë¼ì´ì–¸íŠ¸ ì „ìš© JSX ë°˜í™˜ ...  }  else {    // ... ì´ˆê¸° JSX ë°˜í™˜ ...  }}
```
ì•±ì´ ë¡œë”© ì¤‘ì¸ ë™ì•ˆ ì‚¬ìš©ìëŠ” ì´ˆê¸° ë Œë”ë§ ì¶œë ¥ì„ ë³¼ ê²ƒì…ë‹ˆë‹¤. ê·¸ë‹¤ìŒ ë¡œë”© ë° hydrationì´ ì™„ë£Œë˜ë©´ Effectê°€ ì‹¤í–‰ë˜ì–´
didMount
ë¥¼
true
ë¡œ ì„¤ì •í•˜ë©´ì„œ ë‹¤ì‹œ ë Œë”ë§ì´ ë™ì‘í•©ë‹ˆë‹¤. ì´ë¡œì¨ í´ë¼ì´ì–¸íŠ¸ ì „ìš© ë Œë”ë§ ì¶œë ¥ìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤. EffectëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ˆê¸° ì„œë²„ ë Œë”ë§ ì¤‘ì˜
didMount
ëŠ”
false
ê°€ ë©ë‹ˆë‹¤.
ì´ íŒ¨í„´ì€ ì ì ˆíˆ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ëŠë¦° ì—°ê²° í™˜ê²½ì„ ê°€ì§„ ì‚¬ìš©ìëŠ” ì´ˆê¸° ë Œë”ë§ í™”ë©´ì„ ìƒë‹¹í•œ ì‹œê°„ ë™ì•ˆ ë³¼ ê²ƒì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ì–‘ì„ ê¸‰ë³€ì‹œí‚¤ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë§ì€ ê²½ìš°ì—ëŠ” CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ë¶€ë¡œ ë‹¤ì–‘í•œ ê²ƒë“¤ì„ í‘œì‹œí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ëŒ€ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
Effectê°€ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ 2ë²ˆ ë™ì‘í•©ë‹ˆë‹¤.
ê°œë°œ í™˜ê²½ì—ì„œ Strict Modeê°€ í™œì„±í™”ë˜ë©´ ReactëŠ” ì‹¤ì œ ì„¤ì • ì´ì „ì— ì„¤ì •ê³¼ ì •ë¦¬ë¥¼ í•œë²ˆ ë” ì‹¤í–‰í•©ë‹ˆë‹¤.
ì´ê²ƒì€ Effectì˜ ë¡œì§ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì´ì— ë”°ë¼ ëˆˆì— ë„ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ì •ë¦¬ í•¨ìˆ˜ì— ì–´ë–¤ ë¡œì§ì´ ëˆ„ë½ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ë¦¬ í•¨ìˆ˜ëŠ” ì„¤ì • í•¨ìˆ˜ê°€ ìˆ˜í–‰í•œ ê²ƒì„ ì¤‘ì§€í•˜ê±°ë‚˜ ë˜ëŒë¦´ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ì¸ ì§€ì¹¨ìœ¼ë¡œëŠ” ì‚¬ìš©ìê°€ ì„¤ì •ì´ í•œë²ˆ í˜¸ì¶œë˜ëŠ” ê²ƒ(ë°°í¬ í™˜ê²½ê³¼ ê°™ì´)ê³¼ ì„¤ì • â†’ ì •ë¦¬ â†’ ì„¤ì • ìˆœì„œë¡œ í˜¸ì¶œë˜ëŠ” ê²ƒì„ êµ¬ë³„í•  ìˆ˜ ì—†ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì´ê²ƒì´
ë²„ê·¸ë¥¼ ì°¾ëŠ” ë° ì–´ë–»ê²Œ ë„ì›€ì´ ë˜ë©°,
ë¡œì§ì„ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ëŠ”ì§€
ì— ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ ì—¬ê¸°ë¥¼ ì½ì–´ë³´ì„¸ìš”.
Effectê°€ ë§¤ ë¦¬ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
ë¨¼ì € ì˜ì¡´ì„± ë°°ì—´ì— ê°’ì„ ì¶”ê°€í–ˆëŠ”ì§€ í™•ì¸í•´ ë³´ì„¸ìš”.
```
useEffect(() => {  // ...}); // ğŸš© ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ìŒ. ì¬ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì¬ì‹¤í–‰ë¨!
```
ì˜ì¡´ì„± ë°°ì—´ì„ ëª…ì‹œí–ˆìŒì—ë„ Effectê°€ ì—¬ì „íˆ ë°˜ë³µí•´ì„œ ì‹¤í–‰ëœë‹¤ë©´ ì˜ì¡´ì„±ì´ ë Œë”ë§ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì½˜ì†”ì— ì˜ì¡´ì„±ì„ ìˆ˜ë™ìœ¼ë¡œ ê¸°ë¡í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
  useEffect(() => {    // ..  }, [serverUrl, roomId]);  console.log([serverUrl, roomId]);
```
ê·¸ë‹¤ìŒ ì½˜ì†”ì—ì„œ ê¸°ë¡ëœ ë‹¤ë¥¸ ë Œë”ë§ ë°°ì—´ì„ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ë²„íŠ¼ìœ¼ë¡œ í´ë¦­í•˜ê³  ë‘ ë°°ì—´ ëª¨ë‘ì— ëŒ€í•´ ì „ì—­ ë³€ìˆ˜ë¡œ ì €ì¥ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ìš”ì†Œê°€
temp1
ì´ê³  ë‘ ë²ˆì§¸ ìš”ì†Œê°€
temp2
ë¼ê³  ê°€ì •í•˜ë©´ ë¸Œë¼ìš°ì € ì½˜ì†”ì„ ì‚¬ìš©í•˜ì—¬ ì–‘ìª½ ë°°ì—´ì˜ ê° ì˜ì¡´ì„±ì´ ë™ì¼í•œì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
Object.is(temp1[0], temp2[0]); // ì²« ë²ˆì§¸ ì˜ì¡´ì„±ì´ ë°°ì—´ ê°„ì— ë™ì¼í•œê°€ìš”?Object.is(temp1[1], temp2[1]); // ë‘ ë²ˆì§¸ ì˜ì¡´ì„±ì´ ë°°ì—´ ê°„ì— ë™ì¼í•œê°€ìš”?Object.is(temp1[2], temp2[2]); // ... ë‚˜ë¨¸ì§€ ëª¨ë“  ì˜ì¡´ì„±ë„ í™•ì¸í•©ë‹ˆë‹¤  ...
```
ë Œë”ë§ë§ˆë‹¤ ë‹¤ë¥¸ ì˜ì¡´ì„±ì„ ì°¾ì•„ëƒˆë‹¤ë©´ ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì˜ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Effectì—ì„œ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ state ì—…ë°ì´íŠ¸í•˜ê¸°
ë¶ˆí•„ìš”í•œ ê°ì²´ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ ì˜ì¡´ì„± ì œê±°í•˜ê¸°
Effectì—ì„œ ìµœì‹  propsì™€ stateë¥¼ ì½ê¸°
ìµœí›„ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ (ì´ëŸ¬í•œ ë°©ë²•ë“¤ì´ ë„ì›€ì´ ë˜ì§€ ì•Šì€ ê²½ìš°),
useMemo
ë‚˜
useCallback
(í•¨ìˆ˜ì˜ ê²½ìš°)ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Effectê°€ ë¬´í•œ ë°˜ë³µë©ë‹ˆë‹¤.
Effectê°€ ë¬´í•œ ë°˜ë³µë˜ë ¤ë©´ ë‹¤ìŒ ë‘ ê°€ì§€ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤..
Effectì—ì„œ stateë¥¼ ì—…ë°ì´íŠ¸í•¨.
ë³€ê²½ëœ stateê°€ ë¦¬ë Œë”ë§ì„ ìœ ë°œí•˜ë©°, ì´ì— ë”°ë¼ Effectì˜ ì¢…ì†ì„±ì´ ë³€ê²½ë¨.
ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ì „ì— Effectê°€ ì™¸ë¶€ ì‹œìŠ¤í…œ(DOM, ë„¤íŠ¸ì›Œí¬, ì„œë“œíŒŒí‹° ìœ„ì ¯ ë“±)ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ ìŠ¤ìŠ¤ë¡œ ìë¬¸í•´ë³´ì„¸ìš”. Effectì—ì„œ ì™œ stateë¥¼ ë³€ê²½í–ˆë‚˜ìš”? ë³€ê²½ëœ stateê°€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”ëë‚˜ìš”? ë˜ëŠ” Effectë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„° íë¦„ì„ ê´€ë¦¬í•˜ë ¤ê³  í•˜ëŠ” ê±´ê°€ìš”?
ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ë‹¤ë©´
Effectë¥¼ ì œê±°
í•´ì„œ ë¡œì§ì„ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆëŠ”ì§€ ê³ ë ¤í•´ë³´ì„¸ìš”.
ë§Œì•½ ì‹¤ì œë¡œ ì–´ë–¤ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™” ì¤‘ì´ë¼ë©´ Effectê°€ stateë¥¼ ì–¸ì œ ì–´ë–¤ ì¡°ê±´ì—ì„œ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•´ ê³ ë ¤í•´ ë³´ì„¸ìš”. ì»´í¬ë„ŒíŠ¸ì˜ ì‹œê°ì  ì¶œë ¥ì— ì˜í–¥ì„ ì£¼ëŠ” stateê°€ ë³€í–ˆë‚˜ìš”? ë Œë”ë§ì— ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ì¶”ì í•´ì•¼ í•œë‹¤ë©´ ë¦¬ë Œë”ë§ì„ ì•¼ê¸°í•˜ì§€ ì•ŠëŠ”
ref
ê°€ ë” ì í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Effectê°€ í•„ìš” ì´ìƒìœ¼ë¡œ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ”ì§€(ë¦¬ë Œë”ë§ì„ ì•¼ê¸°í•˜ì§€ ì•Šë„ë¡) í™•ì¸í•´ ë³´ì„¸ìš”.
ë§ˆì§€ë§‰ìœ¼ë¡œ Effectê°€ ì œëŒ€ë¡œ ëœ ì‹œì ì— stateë¥¼ ì—…ë°ì´íŠ¸í–ˆì§€ë§Œ ì—¬ì „íˆ ë¬´í•œ ë°˜ë³µë˜ëŠ” ê²½ìš°, í•´ë‹¹ stateì˜ ì—…ë°ì´íŠ¸ê°€ Effectì˜ ì¢…ì†ì„±ì˜ ë³€ê²½ì„ ì•¼ê¸°í–ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì¢…ì†ì„± ë³€ê²½ì„ ë””ë²„ê¹…í•˜ëŠ” ë°©ë²•ì„ ì½ì–´ë³´ì„¸ìš”.
ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ì§€ ì•Šì•˜ìŒì—ë„ ì •ë¦¬ í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
ì •ë¦¬ í•¨ìˆ˜ëŠ” ë§ˆìš´íŠ¸ í•´ì œ ì‹œ ë¿ë§Œ ì•„ë‹ˆë¼ ë³€ê²½ëœ ì¢…ì†ì„±ìœ¼ë¡œ ì¸í•œ ëª¨ë“  ë¦¬ë Œë”ë§ ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤. ë˜í•œ ê°œë°œ í™˜ê²½ì—ì„œëŠ” Reactê°€
ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëœ ì§í›„ì— í•œ ë²ˆ ë” ì„¤ì •ê³¼ ì •ë¦¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
ì„¤ì • ì½”ë“œì™€ ìƒì‘í•˜ëŠ” ì •ë¦¬ ì½”ë“œê°€ ì—†ë‹¤ë©´ ë³´í†µì€ ì½”ë“œì— ë¬¸ì œê°€ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
```
useEffect(() => {  // ğŸ”´ í”¼í•˜ì„¸ìš”: ìƒì‘í•˜ëŠ” ì„¤ì • ë¡œì§ì´ ì—†ëŠ” ì •ë¦¬ ë¡œì§  return () => {    doSomething();  };}, []);
```
ì •ë¦¬ ë¡œì§ì€ ì„¤ì • ë¡œì§ê³¼ â€˜ëŒ€ì¹­â€™ì´ì–´ì•¼ í•˜ë©° ì„¤ì •ì´ ìˆ˜í–‰í•œ ê²ƒì„ ì¤‘ì§€í•˜ê±°ë‚˜ ë˜ëŒë¦´ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
```
  useEffect(() => {    const connection = createConnection(serverUrl, roomId);    connection.connect();    return () => {      connection.disconnect();    };  }, [serverUrl, roomId]);
```
Effectì˜ ìƒëª…ì£¼ê¸°ì™€ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ê°€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ í™•ì¸í•´ ë³´ì„¸ìš”.
Effectê°€ ì‹œê°ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©°, ì‹¤í–‰ë˜ê¸° ì „ì— ê¹œë¹¡ì„ì´ ë³´ì…ë‹ˆë‹¤.
Effectê°€
ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ê²ƒ
ì„ ì°¨ë‹¨í•´ì•¼ í•˜ëŠ” ê²½ìš°
useEffect
ë¥¼
useLayoutEffect
ë¡œ ëŒ€ì²´í•˜ì„¸ìš”.
ì´ê²ƒì€ ëŒ€ë¶€ë¶„ì˜ Effectì—ëŠ” í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë¸Œë¼ìš°ì € í˜ì¸íŒ… ì´ì „ì— Effectë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²½ìš°ì—ë§Œ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìê°€ ë³´ê¸° ì „ì— íˆ´íŒì˜ ìœ„ì¹˜ë¥¼ ì¸¡ì •í•˜ê³  ì§€ì •í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.
ì´ì „
useDeferredValue
ë‹¤ìŒ
useId
Copyright Â© Meta Platforms, Inc
no uwu plz
uwu?
Logo by
@sawaratsuki1004
React í•™ìŠµí•˜ê¸°
ë¹ ë¥´ê²Œ ì‹œì‘í•˜ê¸°
ì„¤ì¹˜í•˜ê¸°
UI í‘œí˜„í•˜ê¸°
ìƒí˜¸ì‘ìš©ì„± ë”í•˜ê¸°
State ê´€ë¦¬í•˜ê¸°
íƒˆì¶œêµ¬
API ì°¸ê³ ì„œ
React APIs
React DOM APIs
ì»¤ë®¤ë‹ˆí‹°
í–‰ë™ ê°•ë ¹
íŒ€ ì†Œê°œ
ë¬¸ì„œ ê¸°ì—¬ì
ê°ì‚¬ì˜ ë§
ë” ë³´ê¸°
ë¸”ë¡œê·¸
React Native
ê°œì¸ ì •ë³´ ë³´í˜¸
ì•½ê´€